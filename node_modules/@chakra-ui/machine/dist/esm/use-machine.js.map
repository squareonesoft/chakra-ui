{"version":3,"sources":["../../src/use-machine.ts"],"names":["useEffect","useLayoutEffect","useState","useSnapshot","useSafeLayoutEffect","document","useMachine","getMachine","service","start","stop","state","send"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,eAApB,EAAqCC,QAArC,QAAqD,OAArD;AACA,SAASC,WAAT,QAA4B,QAA5B;AAIA,IAAMC,mBAAmB,GACvB,OAAOC,QAAP,KAAoB,WAApB,GAAkCJ,eAAlC,GAAoDD,SADtD;AAGA,OAAO,SAASM,UAAT,CACLC,UADK,EAEL;AACA,MAAM,CAACC,OAAD,IAAYN,QAAQ,CAAC,MACzB,OAAOK,UAAP,KAAsB,UAAtB,GAAmCA,UAAU,EAA7C,GAAkDA,UAD1B,CAA1B;AAGAH,EAAAA,mBAAmB,CAAC,MAAM;AACxBI,IAAAA,OAAO,CAACC,KAAR;AACA,WAAO,MAAM;AACXD,MAAAA,OAAO,CAACE,IAAR;AACD,KAFD;AAGD,GALkB,EAKhB,CAACF,OAAD,CALgB,CAAnB;AAMA,MAAMG,KAAK,GAAGR,WAAW,CAACK,OAAO,CAACG,KAAT,CAAzB;AACA,SAAO,CAACA,KAAD,EAAQH,OAAO,CAACI,IAAhB,EAAsBJ,OAAtB,CAAP;AACD","sourcesContent":["import { useEffect, useLayoutEffect, useState } from \"react\"\nimport { useSnapshot } from \"valtio\"\nimport { MachineSrc } from \"./machine\"\nimport { Dict } from \"./types\"\n\nconst useSafeLayoutEffect =\n  typeof document !== \"undefined\" ? useLayoutEffect : useEffect\n\nexport function useMachine<C extends Dict, S extends string>(\n  getMachine: MachineSrc<C, S>,\n) {\n  const [service] = useState(() =>\n    typeof getMachine === \"function\" ? getMachine() : getMachine,\n  )\n  useSafeLayoutEffect(() => {\n    service.start()\n    return () => {\n      service.stop()\n    }\n  }, [service])\n  const state = useSnapshot(service.state)\n  return [state, service.send, service] as const\n}\n"],"file":"use-machine.js"}