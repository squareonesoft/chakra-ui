{"version":3,"sources":["../../src/use-machine.ts"],"names":["useSafeLayoutEffect","document","useLayoutEffect","useEffect","useMachine","getMachine","service","start","stop","state","send"],"mappings":";;;;;AAAA;;AACA;;AAIA,IAAMA,mBAAmB,GACvB,OAAOC,QAAP,KAAoB,WAApB,GAAkCC,sBAAlC,GAAoDC,gBADtD;;AAGO,SAASC,UAAT,CACLC,UADK,EAEL;AAAA,kBACkB,qBAAS;AAAA,WACzB,OAAOA,UAAP,KAAsB,UAAtB,GAAmCA,UAAU,EAA7C,GAAkDA,UADzB;AAAA,GAAT,CADlB;AAAA,MACOC,OADP;;AAIAN,EAAAA,mBAAmB,CAAC,YAAM;AACxBM,IAAAA,OAAO,CAACC,KAAR;AACA,WAAO,YAAM;AACXD,MAAAA,OAAO,CAACE,IAAR;AACD,KAFD;AAGD,GALkB,EAKhB,CAACF,OAAD,CALgB,CAAnB;AAMA,MAAMG,KAAK,GAAG,yBAAYH,OAAO,CAACG,KAApB,CAAd;AACA,SAAO,CAACA,KAAD,EAAQH,OAAO,CAACI,IAAhB,EAAsBJ,OAAtB,CAAP;AACD","sourcesContent":["import { useEffect, useLayoutEffect, useState } from \"react\"\nimport { useSnapshot } from \"valtio\"\nimport { MachineSrc } from \"./machine\"\nimport { Dict } from \"./types\"\n\nconst useSafeLayoutEffect =\n  typeof document !== \"undefined\" ? useLayoutEffect : useEffect\n\nexport function useMachine<C extends Dict, S extends string>(\n  getMachine: MachineSrc<C, S>,\n) {\n  const [service] = useState(() =>\n    typeof getMachine === \"function\" ? getMachine() : getMachine,\n  )\n  useSafeLayoutEffect(() => {\n    service.start()\n    return () => {\n      service.stop()\n    }\n  }, [service])\n  const state = useSnapshot(service.state)\n  return [state, service.send, service] as const\n}\n"],"file":"use-machine.js"}